{"version":3,"sources":["../../src/pages/pedidos/pedidos.module.ts","../../src/pages/pedidos/pedidos.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PedidosPage } from './pedidos';\n\n@NgModule({\n  declarations: [\n    PedidosPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PedidosPage),\n  ],\n})\nexport class PedidosPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pedidos/pedidos.module.ts","import { Component } from '@angular/core';\nimport { Loading, LoadingController, IonicPage, NavController, NavParams, ModalController, Modal } from 'ionic-angular';\nimport { Cliente } from './../../models/cliente.models';\nimport { Produto } from './../../models/produto.models';\nimport { PedidoServiceProvider } from './../../providers/pedido-service/pedido-service';\nimport { ProdutoServiceProvider } from './../../providers/produto-service/produto-service';\nimport { DateTime } from 'ionic-angular/components/datetime/datetime';\nimport { Pedido } from './../../models/pedido.models';\nimport { FirebaseListObservable } from 'angularfire2/database';\nimport { BarcodeScanner, BarcodeScanResult } from '@ionic-native/barcode-scanner';\nimport { FirebaseListFactoryOpts } from 'angularfire2/interfaces';\n\n@IonicPage()\n@Component({\n  selector: 'page-pedidos',\n  templateUrl: 'pedidos.html',\n})\nexport class PedidosPage {\n\n  arrayProdutos = [];\n  totalItens: number = 0;\n  valorTotal: number = 0.00;\n\n  clienteSelecionado: boolean = false;\n  dadosCliente: Cliente;\n  dadosProduto: Produto;\n  nomeCliente: string = \"\";\n  celCliente: string = \"\";\n  dataHora: string = \"\";\n  detalhesPedido: Pedido;\n\n  listaProduto: FirebaseListObservable<any[]>;\n  barcodeResult: BarcodeScanResult;\n  codBarrasRetorno: string = \"\";\n  strQueryProduto: FirebaseListFactoryOpts;\n  \n  constructor(public navCtrl: NavController, \n              public navParams: NavParams, \n              public modal: ModalController, \n              public pedido: PedidoServiceProvider,\n              public BarcodeScanner: BarcodeScanner,\n              public loadingCRTL: LoadingController,\n              public produto: ProdutoServiceProvider\n            ) {\n    this.dadosCliente = this.navParams.data;\n  }\n\n  openModalProduto() {\n    let val: number = 0;\n    let modal = this.modal.create('ModalProdutoPage');\n    modal.onDidDismiss(dataProd => {\n        // Do things with data coming from modal, for instance :\n        console.log(dataProd);\n        this.dadosProduto = dataProd;\n\n        if(dataProd != \"\") {\n          \n          this.arrayProdutos.push(dataProd);\n\n          this.totalItens = this.arrayProdutos.length;\n          this.valorTotal = this.arrayProdutos.reduce(function(prevVal, elem) {\n            return prevVal + parseFloat(elem.valVenda);\n        }, 0);\n\n        }\n    });\n    modal.present();\n  }\n  \n  excluirItem(item): void {\n    //alert(item);\n    let i: number = 0;\n\n    for (i=0;i<this.arrayProdutos.length;i++) {\n      //alert(this.arrayProdutos[i].codBarras);\n      if (this.arrayProdutos[i].codBarras === item) {\n        \n        this.arrayProdutos.splice(i, 1)\n\n        this.totalItens = this.arrayProdutos.length;\n        this.valorTotal = this.arrayProdutos.reduce(function(prevVal, elem) {\n          return prevVal + parseFloat(elem.valVenda);\n        }, 0);\n\n      }\n    }\n    //this.arrayProdutos.splice(item);\n  }\n\n  criaPedido(detalhesPedido): void {\n\n    this.pedido.criarPedido(detalhesPedido);\n\n  }\n\n  onGetBarcode(): void {\n    \n    this.BarcodeScanner.scan()\n      .then((barcodeResult: BarcodeScanResult) => {\n        let loading: Loading = this.showLoading();\n\n        this.barcodeResult = barcodeResult;\n        this.codBarrasRetorno = this.barcodeResult.text;\n\n        this.strQueryProduto = { query: {orderByChild: 'codBarras', equalTo: this.codBarrasRetorno} };\n\n        this.listaProduto = this.produto.listarProduto(this.strQueryProduto);\n        this.listaProduto.subscribe(produtos => produtos.forEach(produto => this.arrayProdutos.push(produto)));\n\n        alert(this.arrayProdutos.length);\n\n        this.totalItens = this.arrayProdutos.length;\n        this.valorTotal = this.arrayProdutos.reduce(function(prevVal, elem) {\n          return prevVal + parseFloat(elem.valVenda);\n        }, 0);\n\n        loading.dismiss();\n\n      }).catch((error: Error) => {\n        console.log('barcode error: ', error);\n      });\n\n  }\n\n  private showLoading(): Loading {\n    let loading: Loading = this.loadingCRTL.create({\n      //content: 'carregando'\n    });\n    loading.present();\n    return loading;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pedidos/pedidos.ts"],"sourceRoot":""}